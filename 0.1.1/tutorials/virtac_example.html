
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>VIRTAC example &#8212; atip 0.1.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=a58bc63e"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials/virtac_example';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://DiamondLightSource.github.io/atip/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.1.1';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="icon" href="../_static/dls-logo.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How-to Guides" href="../how-to.html" />
    <link rel="prev" title="ATIP example" href="atip_example.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/dls-logo.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/dls-logo.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">atip</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../how-to.html">
    How-to Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../explanations.html">
    Explanations
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DiamondLightSource/atip" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/atip" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../how-to.html">
    How-to Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../explanations.html">
    Explanations
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DiamondLightSource/atip" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/atip" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="atip_example.html">ATIP example</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">VIRTAC example</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../tutorials.html" class="nav-link">Tutorials</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">VIRTAC example</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="virtac-example">
<h1>VIRTAC example<a class="headerlink" href="#virtac-example" title="Link to this heading">#</a></h1>
<section id="running-atip-as-a-virtual-accelerator-using-python-soft-ioc">
<h2>Running ATIP as a Virtual Accelerator using Python Soft IOC<a class="headerlink" href="#running-atip-as-a-virtual-accelerator-using-python-soft-ioc" title="Link to this heading">#</a></h2>
<p>Using <code class="docutils literal notranslate"><span class="pre">PythonSoftIOC</span> <span class="pre">&lt;https://github.com/Araneidae/pythonIoc&gt;</span></code>_, ATIP can
emulate machine PVs, so that the ATIP simulator can be addressed in the same
manner as the live machine. This is useful for testing high level applications,
as it can update PVs in a physically correct way in response to changes by the
user.</p>
<p>The virtual accelerator (virtac for short) runs on EPICS port 6064 (the port
used by convention at Diamond for simulations) to avoid conflict with the same
PVs on the live machine.</p>
</section>
<section id="starting-the-virtual-accelerator">
<h2>Starting the virtual accelerator<a class="headerlink" href="#starting-the-virtual-accelerator" title="Link to this heading">#</a></h2>
<p>Once ATIP has been installed using pip or by running the docker image:</p>
<p>Run the virtac under the development EPICS port:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_CA_SERVER_PORT</span><span class="o">=</span><span class="m">6064</span>
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_CAS_SERVER_PORT</span><span class="o">=</span><span class="m">6064</span>
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_CA_REPEATER_PORT</span><span class="o">=</span><span class="m">6065</span>
$<span class="w"> </span><span class="c1"># at Diamond the above can be set in one go using:    . changeports 6064</span>
$<span class="w"> </span>virtac
</pre></div>
</div>
<p>It takes 10 seconds or so to load the interactive console::</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Starting<span class="w"> </span>record<span class="w"> </span>creation.
~*~*Woah,<span class="w"> </span>were<span class="w"> </span>halfway<span class="w"> </span>there,<span class="w"> </span>Wo-oah...*~*~
Finished<span class="w"> </span>creating<span class="w"> </span>all<span class="w"> </span><span class="m">2981</span><span class="w"> </span>records.
Starting<span class="w"> </span>iocInit
<span class="c1">############################################################################</span>
<span class="c1">## EPICS 7.0.6.0</span>
<span class="c1">## Rev. 7.0.6.99.1.0</span>
<span class="c1">############################################################################</span>
iocRun:<span class="w"> </span>All<span class="w"> </span>initialization<span class="w"> </span><span class="nb">complete</span>
Python<span class="w"> </span><span class="m">3</span>.7.2<span class="w"> </span><span class="o">(</span>default,<span class="w"> </span>Jan<span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">2020</span>,<span class="w"> </span><span class="m">11</span>:03:41<span class="o">)</span>
<span class="o">[</span>GCC<span class="w"> </span><span class="m">4</span>.8.5<span class="w"> </span><span class="m">20150623</span><span class="w"> </span><span class="o">(</span>Red<span class="w"> </span>Hat<span class="w"> </span><span class="m">4</span>.8.5-39<span class="o">)]</span><span class="w"> </span>on<span class="w"> </span>linux
Type<span class="w"> </span><span class="s2">&quot;help&quot;</span>,<span class="w"> </span><span class="s2">&quot;copyright&quot;</span>,<span class="w"> </span><span class="s2">&quot;credits&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;license&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>information.
<span class="o">(</span>InteractiveConsole<span class="o">)</span>
&gt;&gt;&gt;
</pre></div>
</div>
<p>Leave the server running and in a new terminal update the EPICS port::</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_CA_SERVER_PORT</span><span class="o">=</span><span class="m">6064</span>
$<span class="w"> </span><span class="c1"># or:    . changeports 6064</span>
</pre></div>
</div>
<p>In this new terminal you are then free to address the simulator as you would
the live machine, either through Pytac or by directly accessing the PVs.</p>
</section>
<section id="command-line-options">
<h2>Command Line Options:<a class="headerlink" href="#command-line-options" title="Link to this heading">#</a></h2>
<p>Usage::</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>virtac [-h] [--disable-emittance] [--enable-tfb] [--verbose] [ring_mode]
</pre></div>
</div>
<p>Positional arguments::</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ring_mode             The ring mode to be used, e.g., IO4 or DIAD
</pre></div>
</div>
<p>Optional arguments::</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-h, --help            show this help message and exit
-d, --disable-emittance
                      Disable the simulator&#39;s time-consuming emittance
                      calculation
-t, --enable-tfb      Simulate extra dummy hardware to be used by the Tune
                      Feedback system
-v, --verbose         Increase output and logging verbosity
</pre></div>
</div>
<p>N.B. The relatively slow emittance calculation is enabled by default, if the
virtac isn’t as performant as your would like try disabling it using <code class="docutils literal notranslate"><span class="pre">-d</span></code>.</p>
</section>
<section id="feedback-records">
<h2>Feedback Records:<a class="headerlink" href="#feedback-records" title="Link to this heading">#</a></h2>
<p>A number of PVs related to feedback systems are supported. These have been
added to aid testing of the high level applications at Diamond that control
the feedbacks, and so are site specific.</p>
<p>These PVs can be read in the same way as any other PV with caget, but for
testing and debugging there is a special method on the ATIP server object for
setting them.</p>
<p>This is done inside the server console, in the terminal where one you ran
<code class="docutils literal notranslate"><span class="pre">start-virtac</span></code> initially). As arguments, it takes::</p>
<ol class="arabic">
<li><p>The index of an element in the ring, starting from 1; or 0 to set fields of
the lattice;</p></li>
<li><p>The field:</p>
<p>Possible element fields are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">error_sum</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enabled</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">state</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">golden_offset</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bcd_offset</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bba_offset</span></code></p></li>
</ul>
<p>Possible lattice fields are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">beam_current</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feedback_status</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bpm_id</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">emittance_status</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fofb_status</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cell_&lt;cell_number&gt;_excite_start_times</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cell_&lt;cell_number&gt;_excite_amps</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cell_&lt;cell_number&gt;_excite_deltas</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cell_&lt;cell_number&gt;_excite_ticks</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cell_&lt;cell_number&gt;_excite_prime</span></code></p></li>
</ul>
</li>
<li><p>The value to be set:</p>
<p>For example disabling SOFB on the first BPM::</p>
</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt;<span class="w"> </span>server.set_feedback_record<span class="o">(</span><span class="m">3</span>,<span class="w"> </span><span class="s1">&#39;enabled&#39;</span>,<span class="w"> </span><span class="m">0</span><span class="o">)</span>
</pre></div>
</div>
<p>or reducing the beam current::</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt;<span class="w"> </span>server.set_feedback_record<span class="o">(</span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;beam_current&#39;</span>,<span class="w"> </span><span class="m">280</span><span class="o">)</span>
</pre></div>
</div>
<p>For further information on working with feedback systems, please refer to
<code class="docutils literal notranslate"><span class="pre">FEEDBACK_SYSTEMS.rst</span></code>.</p>
</section>
<section id="ring-mode">
<h2>Ring Mode:<a class="headerlink" href="#ring-mode" title="Link to this heading">#</a></h2>
<p>You can run the virtual accelerator in any ring mode that is supported by
Pytac; currently ‘VMX’, ‘VMXSP’, ‘DIAD’, and ‘I04’. The ring mode can be set by the
following methods, which are checked in this order:</p>
<ul class="simple">
<li><p>as a command line argument to <code class="docutils literal notranslate"><span class="pre">virtac</span></code>;</p></li>
<li><p>by changing the <code class="docutils literal notranslate"><span class="pre">RINGMODE</span></code> environment variable</p></li>
<li><p>a PV <code class="docutils literal notranslate"><span class="pre">SR-CS-RING-01:MODE</span></code> which has the ring mode as its value</p></li>
</ul>
<p>If none of these is set then the virtual accelerator will default to ‘I04’.</p>
<p>For example::</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>virtac<span class="w"> </span>I04
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">RINGMODE</span><span class="o">=</span>I04
$<span class="w"> </span>caput<span class="w"> </span>SR-CS-RING-01:MODE<span class="w"> </span><span class="m">3</span>
$<span class="w"> </span><span class="c1"># Having none of these set would also start in mode &#39;I04&#39;.</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="atip_example.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">ATIP example</p>
      </div>
    </a>
    <a class="right-next"
       href="../how-to.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">How-to Guides</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-atip-as-a-virtual-accelerator-using-python-soft-ioc">Running ATIP as a Virtual Accelerator using Python Soft IOC</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#starting-the-virtual-accelerator">Starting the virtual accelerator</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#command-line-options">Command Line Options:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feedback-records">Feedback Records:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ring-mode">Ring Mode:</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/DiamondLightSource/atip/edit/0.1.1/docs/tutorials/virtac_example.md">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/tutorials/virtac_example.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>